import { useLocation, Link, useNavigate } from 'react-router-dom';
import { useUserState } from '../hooks/useUserState';
import { useUserDispatch } from '../hooks/useUserDispatch';
import { signOut } from '../services/authService';
import { UserActionType } from '../reducers/UserReducer';
import { Disclosure, DisclosureButton, DisclosurePanel } from '@headlessui/react';
import { Bars3Icon, XMarkIcon } from '@heroicons/react/16/solid';

const navigation = [
  { name: 'Hem', href: '/' },
  { name: 'Profil', href: '/userStartPage/userProfile', requiresAuth: true },
  { name: 'InstÃ¤llningar', href: '/userStartPage/userSettings', requiresAuth: true },
];

const navigationNotSignedIn = [
  { name: 'Registrering', href: '/register', requiresAuth: false },
  { name: 'Logga in', href: '/login', requiresAuth: false },
];

function classNames(...classes: string[]): string {
  return classes.filter(Boolean).join(' ');
}

export default function Navbar() {
  const location = useLocation();
  const userState = useUserState();
  const userDispatch = useUserDispatch();
  const navigate = useNavigate();

  const handleLogOut = async () => {
    try {
      await signOut();
      userDispatch({ type: UserActionType.LOGOUT });
      navigate('/login');
    } catch (error) {
      console.error('Error during logout:', error);
    }
  };

  return (
    <Disclosure as="nav" className="bg-slate-900 w-screen">
      <div className="mx-auto max-w-7xl px-2 sm:px-6 lg:px-8">
        <div className="relative flex items-center justify-between">
          <div className="absolute inset-y-0 left-0 flex items-center sm:hidden">
            <DisclosureButton className="group relative inline-flex items-center justify-center rounded-md p-2 text-gray-400 hover:bg-gray-700 hover:text-white focus:outline-none focus:ring-1">
              <span className="sr-only">Open main menu</span>
              <Bars3Icon aria-hidden="true" className="block h-6 w-6 group-data-[open]:hidden" />
              <XMarkIcon aria-hidden="true" className="hidden h-6 w-6 group-data-[open]:block" />
            </DisclosureButton>
          </div>

          <div className="flex flex-1 items-center justify-center sm:items-stretch sm:justify-between">
            {/* Logo */}
            <div className="flex flex-shrink-0 items-center">
              <Link to="/" className="text-white text-xl font-semibold">
                {/* Logo text or image */}
                <span className="logo"><svg height="50" viewBox="0 0 267 83" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M120.035 61H118.682C118.646 61 118.629 60.9805 118.629 60.9414V54.0977H117.07C117.031 54.0977 117.012 54.0781 117.012 54.0391L117.023 52.6973C117.023 52.666 117.039 52.6504 117.07 52.6504H121.629C121.672 52.6504 121.693 52.666 121.693 52.6973V54.0391C121.693 54.0781 121.678 54.0977 121.646 54.0977H120.07L120.082 60.9414C120.082 60.9805 120.066 61 120.035 61ZM123.686 61H122.326C122.295 61 122.279 60.9805 122.279 60.9414L122.303 52.6973C122.303 52.666 122.318 52.6504 122.35 52.6504H124.775C125.209 52.6504 125.607 52.7559 125.971 52.9668C126.334 53.1777 126.623 53.4609 126.838 53.8164C127.057 54.1719 127.166 54.5742 127.166 55.0234C127.166 55.3164 127.121 55.582 127.031 55.8203C126.941 56.0586 126.836 56.2598 126.715 56.4238C126.598 56.5879 126.49 56.709 126.393 56.7871C126.826 57.2676 127.043 57.832 127.043 58.4805L127.055 60.9414C127.055 60.9805 127.035 61 126.996 61H125.637C125.605 61 125.59 60.9883 125.59 60.9648V58.4805C125.59 58.1914 125.488 57.9414 125.285 57.7305C125.082 57.5195 124.832 57.4141 124.535 57.4141H123.744L123.732 60.9414C123.732 60.9805 123.717 61 123.686 61ZM124.775 54.0859H123.744V55.9727H124.775C125.021 55.9727 125.24 55.8809 125.432 55.6973C125.627 55.5137 125.725 55.2891 125.725 55.0234C125.725 54.7695 125.631 54.5508 125.443 54.3672C125.256 54.1797 125.033 54.0859 124.775 54.0859ZM127.664 60.9414L129.152 52.6973C129.16 52.666 129.18 52.6504 129.211 52.6504H130.951C130.982 52.6504 131.002 52.666 131.01 52.6973L132.439 60.9414C132.443 60.9805 132.428 61 132.393 61H131.062C131.023 61 131.002 60.9805 130.998 60.9414L130.869 60.0625H129.234L129.105 60.9414C129.102 60.9805 129.082 61 129.047 61H127.711C127.68 61 127.664 60.9805 127.664 60.9414ZM130.014 55.4102L129.475 58.7793H130.629L130.137 55.4102L130.066 54.9648L130.014 55.4102ZM135.152 61.1172C134.719 61.1172 134.322 61.0078 133.963 60.7891C133.607 60.5703 133.324 60.2773 133.113 59.9102C132.906 59.5391 132.803 59.127 132.803 58.6738L132.814 54.9297C132.814 54.4844 132.916 54.082 133.119 53.7227C133.322 53.3594 133.602 53.0684 133.957 52.8496C134.316 52.627 134.715 52.5156 135.152 52.5156C135.598 52.5156 135.994 52.623 136.342 52.8379C136.693 53.0527 136.973 53.3438 137.18 53.7109C137.391 54.0742 137.496 54.4805 137.496 54.9297V55.4805C137.496 55.5117 137.48 55.5273 137.449 55.5273H136.102C136.07 55.5273 136.055 55.5117 136.055 55.4805V54.9297C136.055 54.6641 135.969 54.4355 135.797 54.2441C135.625 54.0527 135.41 53.957 135.152 53.957C134.867 53.957 134.648 54.0547 134.496 54.25C134.344 54.4453 134.268 54.6719 134.268 54.9297V58.6738C134.268 58.9668 134.354 59.207 134.525 59.3945C134.697 59.5781 134.906 59.6699 135.152 59.6699C135.41 59.6699 135.625 59.5684 135.797 59.3652C135.969 59.1582 136.055 58.9277 136.055 58.6738V58.1172C136.055 58.0859 136.07 58.0703 136.102 58.0703H137.461C137.492 58.0703 137.508 58.0859 137.508 58.1172V58.6738C137.508 59.123 137.402 59.5332 137.191 59.9043C136.977 60.2715 136.693 60.5664 136.342 60.7891C135.99 61.0078 135.594 61.1172 135.152 61.1172ZM139.787 61H138.428C138.396 61 138.381 60.9805 138.381 60.9414L138.404 52.709C138.404 52.6699 138.42 52.6504 138.451 52.6504H139.799C139.83 52.6504 139.846 52.6699 139.846 52.709V55.5508L141.727 52.6973C141.758 52.666 141.787 52.6504 141.814 52.6504H143.191C143.227 52.6504 143.234 52.666 143.215 52.6973L141.141 56.0078L143.467 60.9531C143.486 60.9844 143.467 61 143.408 61H141.943C141.904 61 141.881 60.9844 141.873 60.9531L140.25 57.4258L139.834 58.082V60.9414C139.834 60.9805 139.818 61 139.787 61ZM152.279 61.1172C151.854 61.1172 151.461 61.0078 151.102 60.7891C150.746 60.5703 150.461 60.2793 150.246 59.916C150.035 59.5488 149.93 59.1465 149.93 58.709V58.1582C149.93 58.1152 149.949 58.0938 149.988 58.0938H151.336C151.367 58.0938 151.383 58.1152 151.383 58.1582V58.709C151.383 58.9707 151.471 59.1973 151.646 59.3887C151.822 59.5762 152.033 59.6699 152.279 59.6699C152.529 59.6699 152.742 59.5742 152.918 59.3828C153.094 59.1875 153.182 58.9629 153.182 58.709C153.182 58.416 152.99 58.1602 152.607 57.9414C152.545 57.9023 152.463 57.8555 152.361 57.8008C152.264 57.7422 152.146 57.6758 152.01 57.6016C151.873 57.5273 151.74 57.4551 151.611 57.3848C151.482 57.3105 151.357 57.2402 151.236 57.1738C150.799 56.916 150.473 56.5938 150.258 56.207C150.047 55.8164 149.941 55.3789 149.941 54.8945C149.941 54.4492 150.051 54.0469 150.27 53.6875C150.488 53.332 150.773 53.0508 151.125 52.8438C151.48 52.6328 151.865 52.5273 152.279 52.5273C152.705 52.5273 153.096 52.6328 153.451 52.8438C153.807 53.0586 154.09 53.3438 154.301 53.6992C154.516 54.0547 154.623 54.4531 154.623 54.8945V55.8789C154.623 55.9102 154.607 55.9258 154.576 55.9258H153.229C153.197 55.9258 153.182 55.9102 153.182 55.8789L153.17 54.8945C153.17 54.6133 153.082 54.3848 152.906 54.209C152.73 54.0332 152.521 53.9453 152.279 53.9453C152.033 53.9453 151.822 54.0391 151.646 54.2266C151.471 54.4141 151.383 54.6367 151.383 54.8945C151.383 55.1562 151.438 55.375 151.547 55.5508C151.66 55.7266 151.865 55.8945 152.162 56.0547C152.193 56.0703 152.266 56.1094 152.379 56.1719C152.492 56.2344 152.617 56.3047 152.754 56.3828C152.895 56.457 153.021 56.5254 153.135 56.5879C153.248 56.6465 153.316 56.6816 153.34 56.6934C153.738 56.916 154.053 57.1895 154.283 57.5137C154.518 57.8379 154.635 58.2363 154.635 58.709C154.635 59.166 154.529 59.5762 154.318 59.9395C154.104 60.3027 153.818 60.5898 153.463 60.8008C153.107 61.0117 152.713 61.1172 152.279 61.1172ZM156.873 61H155.514C155.482 61 155.467 60.9805 155.467 60.9414L155.49 52.6973C155.49 52.666 155.506 52.6504 155.537 52.6504H157.002C157.033 52.6504 157.061 52.666 157.084 52.6973L158.18 54.2793L159.27 52.6973C159.293 52.666 159.322 52.6504 159.357 52.6504H160.828C160.863 52.6504 160.881 52.666 160.881 52.6973L160.904 60.9414C160.904 60.9805 160.889 61 160.857 61H159.498C159.467 61 159.451 60.9805 159.451 60.9414L159.439 54.8184L158.18 56.6465L156.932 54.8184L156.92 60.9414C156.92 60.9805 156.904 61 156.873 61ZM161.508 60.9414L162.996 52.6973C163.004 52.666 163.023 52.6504 163.055 52.6504H164.795C164.826 52.6504 164.846 52.666 164.854 52.6973L166.283 60.9414C166.287 60.9805 166.271 61 166.236 61H164.906C164.867 61 164.846 60.9805 164.842 60.9414L164.713 60.0625H163.078L162.949 60.9414C162.945 60.9805 162.926 61 162.891 61H161.555C161.523 61 161.508 60.9805 161.508 60.9414ZM163.857 55.4102L163.318 58.7793H164.473L163.98 55.4102L163.91 54.9648L163.857 55.4102ZM168.439 61H167.08C167.049 61 167.033 60.9805 167.033 60.9414L167.057 52.6973C167.057 52.666 167.072 52.6504 167.104 52.6504H169.529C169.963 52.6504 170.361 52.7559 170.725 52.9668C171.088 53.1777 171.377 53.4609 171.592 53.8164C171.811 54.1719 171.92 54.5742 171.92 55.0234C171.92 55.3164 171.875 55.582 171.785 55.8203C171.695 56.0586 171.59 56.2598 171.469 56.4238C171.352 56.5879 171.244 56.709 171.146 56.7871C171.58 57.2676 171.797 57.832 171.797 58.4805L171.809 60.9414C171.809 60.9805 171.789 61 171.75 61H170.391C170.359 61 170.344 60.9883 170.344 60.9648V58.4805C170.344 58.1914 170.242 57.9414 170.039 57.7305C169.836 57.5195 169.586 57.4141 169.289 57.4141H168.498L168.486 60.9414C168.486 60.9805 168.471 61 168.439 61ZM169.529 54.0859H168.498V55.9727H169.529C169.775 55.9727 169.994 55.8809 170.186 55.6973C170.381 55.5137 170.479 55.2891 170.479 55.0234C170.479 54.7695 170.385 54.5508 170.197 54.3672C170.01 54.1797 169.787 54.0859 169.529 54.0859ZM175.137 61H173.783C173.748 61 173.73 60.9805 173.73 60.9414V54.0977H172.172C172.133 54.0977 172.113 54.0781 172.113 54.0391L172.125 52.6973C172.125 52.666 172.141 52.6504 172.172 52.6504H176.73C176.773 52.6504 176.795 52.666 176.795 52.6973V54.0391C176.795 54.0781 176.779 54.0977 176.748 54.0977H175.172L175.184 60.9414C175.184 60.9805 175.168 61 175.137 61ZM177.709 61H176.35C176.318 61 176.303 60.9844 176.303 60.9531V59.5938C176.303 59.5625 176.318 59.5469 176.35 59.5469H177.709C177.74 59.5469 177.756 59.5625 177.756 59.5938V60.9531C177.756 60.9844 177.74 61 177.709 61ZM188.9 61H185.021C184.99 61 184.975 60.9805 184.975 60.9414L184.986 52.709C184.986 52.6699 185.006 52.6504 185.045 52.6504H186.381C186.42 52.6504 186.439 52.6699 186.439 52.709L186.428 59.5234H188.9C188.939 59.5234 188.959 59.543 188.959 59.582V60.9414C188.959 60.9805 188.939 61 188.9 61ZM191.162 61H189.803C189.764 61 189.744 60.9805 189.744 60.9414L189.756 52.6973C189.756 52.666 189.771 52.6504 189.803 52.6504H191.15C191.182 52.6504 191.197 52.666 191.197 52.6973L191.209 60.9414C191.209 60.9805 191.193 61 191.162 61ZM195.064 61H193.611C193.576 61 193.557 60.9805 193.553 60.9414L191.895 52.6973C191.887 52.666 191.902 52.6504 191.941 52.6504H193.301C193.332 52.6504 193.352 52.666 193.359 52.6973L194.344 58.1934L195.305 52.6973C195.312 52.666 195.332 52.6504 195.363 52.6504H196.705C196.748 52.6504 196.764 52.666 196.752 52.6973L195.123 60.9414C195.119 60.9805 195.1 61 195.064 61ZM201.381 61H197.502C197.471 61 197.455 60.9805 197.455 60.9414L197.467 52.6973C197.467 52.666 197.482 52.6504 197.514 52.6504H201.369C201.4 52.6504 201.416 52.6699 201.416 52.709V54.0508C201.416 54.082 201.4 54.0977 201.369 54.0977H198.908V55.9727H201.369C201.4 55.9727 201.416 55.9883 201.416 56.0195L201.428 57.3789C201.428 57.4102 201.412 57.4258 201.381 57.4258H198.908V59.5234H201.381C201.412 59.5234 201.428 59.543 201.428 59.582V60.9531C201.428 60.9844 201.412 61 201.381 61ZM211.289 61H209.836C209.801 61 209.781 60.9805 209.777 60.9414L208.359 52.6973C208.352 52.666 208.363 52.6504 208.395 52.6504H209.742C209.773 52.6504 209.793 52.666 209.801 52.6973L210.568 58.1172L211.359 52.6973C211.367 52.666 211.391 52.6504 211.43 52.6504H212.514C212.545 52.6504 212.564 52.666 212.572 52.6973L213.352 58.1172L214.131 52.6973C214.139 52.666 214.158 52.6504 214.189 52.6504H215.525C215.564 52.6504 215.58 52.666 215.572 52.6973L214.143 60.9414C214.139 60.957 214.127 60.9707 214.107 60.9824L214.084 61H212.631C212.607 61 212.588 60.9805 212.572 60.9414L211.957 56.6348L211.348 60.9414C211.344 60.9805 211.324 61 211.289 61ZM220.201 61H216.322C216.291 61 216.275 60.9805 216.275 60.9414L216.287 52.6973C216.287 52.666 216.303 52.6504 216.334 52.6504H220.189C220.221 52.6504 220.236 52.6699 220.236 52.709V54.0508C220.236 54.082 220.221 54.0977 220.189 54.0977H217.729V55.9727H220.189C220.221 55.9727 220.236 55.9883 220.236 56.0195L220.248 57.3789C220.248 57.4102 220.232 57.4258 220.201 57.4258H217.729V59.5234H220.201C220.232 59.5234 220.248 59.543 220.248 59.582V60.9531C220.248 60.9844 220.232 61 220.201 61ZM225.24 61H221.361C221.33 61 221.314 60.9805 221.314 60.9414L221.326 52.709C221.326 52.6699 221.346 52.6504 221.385 52.6504H222.721C222.76 52.6504 222.779 52.6699 222.779 52.709L222.768 59.5234H225.24C225.279 59.5234 225.299 59.543 225.299 59.582V60.9414C225.299 60.9805 225.279 61 225.24 61ZM230.01 61H226.131C226.1 61 226.084 60.9805 226.084 60.9414L226.096 52.709C226.096 52.6699 226.115 52.6504 226.154 52.6504H227.49C227.529 52.6504 227.549 52.6699 227.549 52.709L227.537 59.5234H230.01C230.049 59.5234 230.068 59.543 230.068 59.582V60.9414C230.068 60.9805 230.049 61 230.01 61ZM232.26 61H230.9C230.869 61 230.854 60.9844 230.854 60.9531V59.5938C230.854 59.5625 230.869 59.5469 230.9 59.5469H232.26C232.291 59.5469 232.307 59.5625 232.307 59.5938V60.9531C232.307 60.9844 232.291 61 232.26 61Z" fill="#3BACED" />
                  <path d="M25 10.5C22.8514 6.40021 22.3201 4.10095 22.5 0C27.9608 0.163051 30.7219 1.18211 35 5C36.8105 8.71524 37.2311 10.7953 37 14.5C32.1789 14.9347 29.5448 14.1509 25 10.5Z" fill="#3BACED" />
                  <path d="M36 20H37.5C38 17 39 14.5 42.5 11C45 8.5 48.0222 6.95143 52.5 6L51.5 2C46.672 3.20671 44.1348 4.45628 40 8C37.3436 12.1666 36.4745 14.7961 36 20Z" fill="#3BACED" />
                  <path d="M53 17C48.7675 17.4128 46.5768 18.0645 43 20C47.2369 21.9812 49.6459 22.6267 54 23C58.9582 22.9055 61.4731 22.3538 65.5 20.5C60.7876 18.1463 58.0509 17.386 53 17Z" fill="#5FB4E7" />
                  <path d="M54.5 33.5C47.9836 30.031 44.7951 27.4235 40 21.5L41.5 20.5C46.4906 23.4613 49.3346 24.5762 54.5 25.5C60.5968 25.6996 63.6727 25.3844 68.5 24C71.7794 27.3176 72.7956 29.3897 73 33.5C66.166 35.5976 62.1147 35.5893 54.5 33.5Z" fill="url(#paint0_linear_1_16)" />
                  <path d="M45.5 42C39.2695 34.4354 37.5178 30.2808 37 23L39 22C43.3032 30.1726 47.0278 33.5545 56.5 37C63.132 38.9912 66.8538 39.4106 73.5 38.5C73.3783 45.3855 72.7019 48.99 70.5 55C60.0107 52.3503 54.5386 49.5106 45.5 42Z" fill="url(#paint1_linear_1_16)" />
                  <path d="M36 23.5L34.5 22.5C29.675 34.2084 31.1573 41.7571 38.0041 55C44.4397 65.3796 48.9488 69.8994 58.0041 76.5C64.0128 70.978 66.227 67.6788 68.5041 61.5C56.6733 55.9054 51.1522 51.8009 43.0041 43C38.0824 35.2915 35.9555 30.6528 36 23.5Z" fill="url(#paint2_linear_1_16)" />
                  <path d="M32.302 21L33.802 22.5C28.5392 33.613 27.7286 40.3875 32.302 54C38.847 67.9269 42.9091 72.9936 50.302 81C49.4569 81.7996 48.8792 82.2169 46.302 82.5C45.2034 82.4879 44.4332 82.3775 41.302 81C39.2725 79.8472 37.9745 79.491 35.302 79.5C32.5745 80.1273 31.1372 80.7852 28.802 82.5C22.0338 66.8823 17.802 49.5 19.302 40.5C20.802 31.5 26.8754 24.2537 32.302 21Z" fill="url(#paint3_linear_1_16)" />
                  <path d="M0 48C6 26 17.5 23 27.5 19L30.5 21C21.3395 27.5 16.7538 31.8606 15 48C15.3541 62.1217 16.7251 69.1047 20.5 80.5C19.3135 81.6172 3.65411 67.4477 0 48Z" fill="url(#paint4_linear_1_16)" />
                  <path d="M7 20.5C1.69161 24.7821 0 36.5 0 36.5C0 36.5 5.18051 28.2396 10 24.5C15.2474 20.4284 25.5 17.5 25.5 17.5C25.5 17.5 12.6967 15.9047 7 20.5Z" fill="#11699C" />
                  <path d="M85.544 41V24.68H87.728C89.184 26.76 90.52 28.856 91.736 30.968C92.968 33.064 94.12 35.256 95.192 37.544L94.952 31.304V24.68H96.992V41H94.808C93.688 38.664 92.528 36.392 91.328 34.184C90.144 31.96 88.848 29.792 87.44 27.68L87.584 34.328V41H85.544ZM107.005 24.68H109.165V35.144C109.165 36.456 109.437 37.48 109.981 38.216C110.541 38.952 111.405 39.32 112.573 39.32C113.757 39.32 114.621 38.952 115.165 38.216C115.709 37.48 115.981 36.456 115.981 35.144V24.68H118.141V35.144C118.141 37.048 117.677 38.544 116.749 39.632C115.821 40.704 114.429 41.24 112.573 41.24C110.701 41.24 109.301 40.704 108.373 39.632C107.461 38.544 107.005 37.048 107.005 35.144V24.68ZM125.898 26.648V24.68H137.49V26.648H132.738V41H130.65V26.648H125.898ZM147.655 34.616V41H145.567V24.68H150.679C152.215 24.68 153.399 25.088 154.231 25.904C155.079 26.704 155.503 27.776 155.503 29.12V30.152C155.503 31.112 155.279 31.944 154.831 32.648C154.399 33.352 153.775 33.872 152.959 34.208C153.647 35.312 154.287 36.432 154.879 37.568C155.471 38.704 156.015 39.848 156.511 41H154.111C153.199 38.824 152.135 36.696 150.919 34.616H147.655ZM150.679 26.6H147.655V32.696H150.679C151.495 32.696 152.143 32.472 152.623 32.024C153.103 31.56 153.343 30.936 153.343 30.152V29.12C153.343 28.32 153.103 27.704 152.623 27.272C152.143 26.824 151.495 26.6 150.679 26.6ZM167.296 41H165.208V24.68H167.296V41ZM175.398 26.648V24.68H186.99V26.648H182.238V41H180.15V26.648H175.398ZM197.155 34.616V41H195.067V24.68H200.179C201.715 24.68 202.899 25.088 203.731 25.904C204.579 26.704 205.003 27.776 205.003 29.12V30.152C205.003 31.112 204.779 31.944 204.331 32.648C203.899 33.352 203.275 33.872 202.459 34.208C203.147 35.312 203.787 36.432 204.379 37.568C204.971 38.704 205.515 39.848 206.011 41H203.611C202.699 38.824 201.635 36.696 200.419 34.616H197.155ZM200.179 26.6H197.155V32.696H200.179C200.995 32.696 201.643 32.472 202.123 32.024C202.603 31.56 202.843 30.936 202.843 30.152V29.12C202.843 28.32 202.603 27.704 202.123 27.272C201.643 26.824 200.995 26.6 200.179 26.6ZM223.348 41L222.124 37.208H215.932L214.708 41H212.668L218.092 24.68H220.06L225.508 41H223.348ZM217.444 32.504L216.532 35.312H221.5L220.588 32.504L219.028 27.464L217.444 32.504ZM235.202 34.64C235.202 36.144 235.498 37.304 236.09 38.12C236.698 38.92 237.626 39.32 238.874 39.32C239.418 39.32 239.954 39.256 240.482 39.128C241.01 39 241.642 38.776 242.378 38.456L243.074 40.232C242.29 40.584 241.546 40.84 240.842 41C240.138 41.16 239.458 41.24 238.802 41.24C236.914 41.24 235.482 40.648 234.506 39.464C233.53 38.28 233.042 36.672 233.042 34.64V31.04C233.042 29.008 233.53 27.4 234.506 26.216C235.482 25.032 236.914 24.44 238.802 24.44C239.458 24.44 240.138 24.52 240.842 24.68C241.562 24.84 242.29 25.096 243.026 25.448L242.354 27.248C241.058 26.672 239.898 26.384 238.874 26.384C237.626 26.384 236.698 26.784 236.09 27.584C235.498 28.384 235.202 29.536 235.202 31.04V34.64ZM260.62 41L255.964 33.296C255.628 33.648 255.276 34.008 254.908 34.376C254.556 34.744 254.188 35.112 253.804 35.48V41H251.716V24.68H253.804V33.152C255.308 31.632 256.564 30.192 257.572 28.832C258.58 27.472 259.436 26.088 260.14 24.68H262.396C261.676 26.088 260.924 27.368 260.14 28.52C259.372 29.656 258.492 30.792 257.5 31.928L263.164 41H260.62Z" fill="#11699C" />
                  <defs>
                    <linearGradient id="paint0_linear_1_16" x1="56.5" y1="20.5" x2="56.5" y2="35.0701" gradientUnits="userSpaceOnUse">
                      <stop stopColor="#63B8EA" />
                      <stop offset="1" stopColor="#4EA7DC" />
                    </linearGradient>
                    <linearGradient id="paint1_linear_1_16" x1="55.25" y1="22" x2="55.25" y2="55" gradientUnits="userSpaceOnUse">
                      <stop stopColor="#4AA4D9" />
                      <stop offset="1" stopColor="#4EA7DC" />
                    </linearGradient>
                    <linearGradient id="paint2_linear_1_16" x1="50.2521" y1="23" x2="50.2521" y2="76.5" gradientUnits="userSpaceOnUse">
                      <stop stopColor="#40A0D5" />
                      <stop offset="1" stopColor="#136B9E" />
                    </linearGradient>
                    <linearGradient id="paint3_linear_1_16" x1="34.651" y1="21" x2="34.651" y2="82.5" gradientUnits="userSpaceOnUse">
                      <stop stopColor="#429ED3" />
                      <stop offset="1" stopColor="#1771A4" />
                    </linearGradient>
                    <linearGradient id="paint4_linear_1_16" x1="15.25" y1="19" x2="15.25" y2="80.5617" gradientUnits="userSpaceOnUse">
                      <stop stopColor="#3D9CD1" />
                      <stop offset="1" stopColor="#11699C" />
                    </linearGradient>
                  </defs>
                </svg>
                </span>
              </Link>
            </div>

            {/* Desktop Menu */}
            <div className="hidden sm:ml-6 sm:block">
              <div className="flex gap-10 items-center">
                {navigation
                  .filter((item) => !item.requiresAuth || userState.isLoggedIn)
                  .map((item) => (
                    <Link
                      key={item.name}
                      to={item.href}
                      aria-current={location.pathname === item.href ? 'page' : undefined}
                      className={classNames(
                        location.pathname === item.href
                          ? 'bg-gray-900 text-white font-bold border-b border-blue-500'
                          : 'text-gray-300 hover:bg-gray-700 hover:text-white',
                        'rounded-md px-3 py-2 text-sm font-medium'
                      )}
                    >
                      {item.name}
                    </Link>
                  ))}

                {/* User Links */}
                {userState.isLoggedIn ? (
                  <button
                    onClick={handleLogOut}
                    className="text-gray-300 hover:bg-gray-700 hover:text-white rounded-md p-3 text-sm font-medium"
                  >
                    Logga ut
                  </button>
                ) : (
                  <>
                    {navigationNotSignedIn
                      .filter((item) => !item.requiresAuth || userState.isLoggedIn)
                      .map((item) => (
                        <Link
                          key={item.name}
                          to={item.href}
                          aria-current={location.pathname === item.href ? 'page' : undefined}
                          className={classNames(
                            location.pathname === item.href
                              ? 'bg-gray-900 text-white font-bold border-b border-blue-500'
                              : 'text-gray-300 hover:bg-gray-700 hover:text-white',
                            'rounded-md px-3 py-2 text-sm font-medium'
                          )}
                        >
                          {item.name}
                        </Link>
                      ))}
                  </>
                )}
              </div>
            </div>
          </div>
        </div>
      </div>

      {/* Mobile Menu */}
      <DisclosurePanel className="sm:hidden">
        <div className="space-y-1 px-2 pb-3 pt-2">
          {navigation
            .filter((item) => !item.requiresAuth || userState.isLoggedIn)
            .map((item) => (
              <DisclosureButton
                key={item.name}
                as={Link}
                to={item.href}
                aria-current={location.pathname === item.href ? 'page' : undefined}
                className={classNames(
                  location.pathname === item.href
                    ? 'bg-gray-900 text-white font-medium border-b border-blue-500'
                    : 'text-gray-300 hover:bg-gray-700 hover:text-white',
                  'block rounded-md px-3 py-2 text-sm font-normal'
                )}
              >
                {item.name}
              </DisclosureButton>
            ))}

          {/* User Links for Mobile */}
          {userState.isLoggedIn ? (
            <DisclosureButton
              as="button"
              onClick={handleLogOut}
              className="text-gray-300 hover:bg-gray-700 hover:text-white block rounded-md px-3 py-2 text-sm font-normal"
            >
              Logga ut
            </DisclosureButton>
          ) : (
            <>
              {navigationNotSignedIn
                .map((item) => (
                  <DisclosureButton
                    key={item.name}
                    as={Link}
                    to={item.href}
                    aria-current={location.pathname === item.href ? 'page' : undefined}
                    className={classNames(
                      location.pathname === item.href
                        ? 'bg-gray-900 text-white font-medium border-b border-blue-500'
                        : 'text-gray-300 hover:bg-gray-700 hover:text-white',
                      'block rounded-md px-3 py-1 text-sm font-normal'
                    )}
                  >
                    {item.name}
                  </DisclosureButton>
                ))}
            </>
          )}
        </div>
      </DisclosurePanel>
    </Disclosure>
  );
}
